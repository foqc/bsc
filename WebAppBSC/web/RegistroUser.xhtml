<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition template="/plantilla/templatePrincipal.xhtml">


        <ui:define name="title">
            <h:outputText value="Registro de usuarios - BSC"></h:outputText>
        </ui:define>

        <ui:define name="body">
            <div class="contenido">

                <div class="page-header">
                    <!-- <h:outputText value="BALANCED SCORE CARD" styleClass="titulo textoPie" /> -->
                    <h1 style="text-align: center;">Regsitro de usuarios</h1>
                </div>
                <div class="well1">
                    <div class="centradoLogin">
                        <h:form id="TusuarioCreateForm">
                            <h:panelGroup id="display">
                                <p:panelGrid columns="2" rendered="#{controladorUsuario.objUsuario != null}" styleClass="tblForm tblFormBorde">                        
                                    <p:outputLabel value="Cédula:" for="tusuariocedula" />
                                    <p:inputText id="tusuariocedula" value="#{controladorUsuario.objUsuario.cedula}" title="Cédula" required="true" requiredMessage="#{bundle.CreateTusuarioRequiredMessage_tusuariocedula}"/>

                                    <p:outputLabel value="Nombres:" for="tusuarionombres" />
                                    <p:inputText id="tusuarionombres" value="#{controladorUsuario.objUsuario.nombres}" title="Nombres" required="true" requiredMessage="#{bundle.CreateTusuarioRequiredMessage_tusuarionombres}"/>

                                    <p:outputLabel value="Apellidos:" for="tusuarioapellidos" />
                                    <p:inputText id="tusuarioapellidos" value="#{controladorUsuario.objUsuario.apellidos}" title="Apellidos" required="true" requiredMessage="#{bundle.CreateTusuarioRequiredMessage_tusuarioapellidos}"/>

                                    <p:outputLabel value="Alias:" for="tusuarioalias" />
                                    <p:inputText id="tusuarioalias" value="#{controladorUsuario.objUsuario.alias}" title="Alias" required="true" requiredMessage="#{bundle.CreateTusuarioRequiredMessage_tusuarioalias}"/>

                                    <p:outputLabel value="Clave:" for="tusuarioclave" />
                                    <p:password id="tusuarioclave" value="#{controladorUsuario.objUsuario.clave}" title="Clave" required="true" requiredMessage="#{bundle.CreateTusuarioRequiredMessage_tusuarioclave}"/>

                                    <p:outputLabel value="Teléfono:" for="tusuariotelefono" />
                                    <p:inputText id="tusuariotelefono" value="#{controladorUsuario.objUsuario.telefono}" title="Teléfono" />

                                    <p:outputLabel value="Celular:" for="tusuariocelular" />
                                    <p:inputText id="tusuariocelular" value="#{controladorUsuario.objUsuario.celular}" title="Celular" />

                                    <p:outputLabel value="Correo:" for="tusuariocorreo" />
                                    <p:inputText id="tusuariocorreo" value="#{controladorUsuario.objUsuario.correo}" title="Correo" required="true" requiredMessage="#{bundle.CreateTusuarioRequiredMessage_tusuariocorreo}"/>

                                    <p:outputLabel value="Dirección:" for="tusuariodireccion" />
                                    <p:inputText id="tusuariodireccion" value="#{controladorUsuario.objUsuario.direccion}" title="Dirección" required="true" requiredMessage="#{bundle.CreateTusuarioRequiredMessage_tusuariodireccion}"/>

                                    <p:outputLabel value="Tipo Usuario" for="ttipousuariocodigo" />
                                    <p:selectOneMenu id="ttipousuariocodigo" value="#{controladorUsuario.objUsuario.objTipoUsuario.codigo}" required="true" requiredMessage="#{bundle.EditTusuarioRequiredMessage_ttipousuariocodigo}" style="width:125px">
                                        <f:selectItems value="#{rolBean.selectOneItemsRolSinAdmin}"/>
                                    </p:selectOneMenu>
                                </p:panelGrid>     
                                <p:separator/>

                                <p:commandButton actionListener="#{controladorUsuario.registrarUsuario()}" value="Registrarse" update=":mensajes" oncomplete="manejarRegistro(xhr, status, args)" styleClass="btnRight"/>
                            </h:panelGroup>
                        </h:form>
                    </div>
                </div>
            </div>
            <script type="text/javascript">
                //<![CDATA[
                function manejarRegistro(xhr, status, args) {
                    if (!args.validationFailed && args.correcto) {
                        setTimeout(function () {
                            window.location = "login.xhtml";
                        }, 2000);
                    }
                }
                //]]>
            </script>
        </ui:define>
    </ui:composition>
</html>
